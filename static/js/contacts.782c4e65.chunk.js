"use strict";(self.webpackChunkcontacts_management=self.webpackChunkcontacts_management||[]).push([[421],{8028:function(e,n,r){r.r(n),r.d(n,{default:function(){return oe}});var t=r(885),a=r(5479),i=r(6182),l=r(8547),s=r(3865),o=r(8571),c=r(9867),d=r(6372),u=r(3078),m=r(2834),h=function(e){var n=e.children;return(0,m.jsx)(x,{children:n})},x=(0,u.ZP)("section")((function(e){return{padding:e.theme.spacing(2),position:"relative",height:"100vh"}})),Z=r(1413),j=r(3598),f=r(3941),p=r(7951),v=r(2371),g=r(2639),b=r(9979),C=r(9359),P=r(6900),S=r(3255),y=r(5911),k=function(e){return["users",e]},w=function(e){return"users/".concat(e)},_={female:"Female",male:"Male",other:"Other"},I={marketing:"Marketing",sales:"Sales",it:"IT",support:"Support"},T=r(4741),W=r(5987),q=["children"],A=function(e){var n=e.children,r=(0,W.Z)(e,q);return(0,m.jsx)(j.Z,(0,Z.Z)((0,Z.Z)({display:"flex",justifyContent:"center",alignItems:"center",p:3},r),{},{children:(0,m.jsx)(l.Z,{children:n||"No data available"})}))},H=function(e){var n=e.children;return(0,m.jsx)(l.Z,{variant:"body2",children:n||"---"})},F=r(8386),Q=r(9762),R=r(9830),E=r(5537),N=r(1736),D=r(2541),G=r(4964),B=r(3338),L=r(6070),M=r(9460);function O(e){var n=e.control,r=e.name,t=e.label;return(0,m.jsx)(L.Z,{control:(0,m.jsx)(B.Qr,{name:r,control:n,render:function(e){var n=e.field;return(0,m.jsx)(M.Z,(0,Z.Z)((0,Z.Z)({},n),{},{checked:!!n.value,onChange:function(e){return n.onChange(e.target.checked)}}))}}),label:t})}var V=["onChange"],z=c.forwardRef((function(e,n){var r=e.onChange,t=(0,W.Z)(e,V);return(0,m.jsx)(P.Z,(0,Z.Z)((0,Z.Z)({},t),{},{getInputRef:n,onValueChange:function(n){r({target:{name:e.name,value:n.value}})},thousandSeparator:!0,isNumericString:!0}))})),$=r(1338),U=r(9952),J=r(5437),K=r(9577),X=r(2954),Y=function(e){var n=e.control;return(0,m.jsxs)(U.Z,{margin:"dense",fullWidth:!0,children:[(0,m.jsx)(J.Z,{id:"department-select-label",children:"Department"}),(0,m.jsx)(B.Qr,{name:"department",control:n,render:function(e){var n=e.field;return(0,m.jsxs)(K.Z,(0,Z.Z)((0,Z.Z)({},n),{},{variant:"standard",labelId:"department-select-label",children:[(0,m.jsx)(X.Z,{value:"",children:(0,m.jsx)("em",{children:"Select Department"})}),Object.entries(I).map((function(e){var n=(0,t.Z)(e,2),r=n[0],a=n[1];return(0,m.jsx)(X.Z,{value:r,children:a},r)}))]}))}})]})},ee=r(9100),ne=r(4957),re=r(5234),te=function(e){var n=e.control;return(0,m.jsxs)(U.Z,{children:[(0,m.jsx)(ee.Z,{children:"Gender"}),(0,m.jsx)(B.Qr,{name:"gender",control:n,render:function(e){var n=e.field;return(0,m.jsx)(ne.Z,(0,Z.Z)((0,Z.Z)({},n),{},{row:!0,children:Object.entries(_).map((function(e){var n=(0,t.Z)(e,2),r=n[0],a=n[1];return(0,m.jsx)(L.Z,{value:r,control:(0,m.jsx)(re.Z,{}),label:a},r)}))}))}})]})},ae=function(e){var n,r,t,a,i,l,c=e.onClose,d=e.open,u=e.user,h=(0,B.cI)({mode:"all",defaultValues:(0,Z.Z)({gender:null,department:"",contribution:"",isActive:!0},u)}),x=h.register,j=h.handleSubmit,f=h.formState,p=f.errors,v=f.isSubmitting,g=f.isValidating,b=h.control,C=(0,S.useMutation)((function(e){return(0,$.L)(w(u.id),{jsonBody:e,method:"PUT"})})).mutateAsync,P=(0,S.useQueryClient)();return(0,m.jsx)(F.Z,{open:d,onClose:c,maxWidth:"xs",fullWidth:!0,children:(0,m.jsxs)("form",{onSubmit:j((function(e){return C(e,{onSuccess:function(){P.invalidateQueries(k()),c()}})})),children:[(0,m.jsxs)(Q.Z,{children:['Edit Contact "',u.first_name," ",u.last_name,'"']}),(0,m.jsx)(R.Z,{children:(0,m.jsxs)(E.ZP,{container:!0,spacing:2,children:[(0,m.jsx)(E.ZP,{item:!0,sm:12,md:6,children:(0,m.jsx)(s.Z,(0,Z.Z)({margin:"dense",label:"First Name",fullWidth:!0,variant:"standard",error:!(null===(n=p.first_name)||void 0===n||!n.message),helperText:null!==(r=null===(t=p.first_name)||void 0===t?void 0:t.message)&&void 0!==r?r:" "},x("first_name",{required:"First name is required"})))}),(0,m.jsx)(E.ZP,{item:!0,sm:12,md:6,children:(0,m.jsx)(s.Z,(0,Z.Z)({margin:"dense",label:"Last Name",fullWidth:!0,variant:"standard"},x("last_name")))}),(0,m.jsx)(E.ZP,{item:!0,sm:12,children:(0,m.jsx)(te,{control:b})}),(0,m.jsx)(E.ZP,{item:!0,sm:12,children:(0,m.jsx)(s.Z,(0,Z.Z)({margin:"dense",label:"Email Address",type:"email",fullWidth:!0,variant:"standard",error:!(null===(a=p.email)||void 0===a||!a.message),helperText:null!==(i=null===(l=p.email)||void 0===l?void 0:l.message)&&void 0!==i?i:" "},x("email",{required:"Email is required"})))}),(0,m.jsx)(E.ZP,{item:!0,sm:12,md:6,children:(0,m.jsx)(Y,{control:b})}),(0,m.jsx)(E.ZP,{item:!0,sm:12,md:6,children:(0,m.jsx)(s.Z,(0,Z.Z)((0,Z.Z)({margin:"dense",label:"Contribution",fullWidth:!0,variant:"standard"},x("contribution")),{},{InputProps:{inputComponent:z,startAdornment:(0,m.jsx)(o.Z,{position:"start",children:"$"})}}))}),(0,m.jsx)(E.ZP,{item:!0,sm:12,children:(0,m.jsx)(N.Z,{children:(0,m.jsx)(O,{control:b,name:"isActive",label:"Is Active"})})})]})}),(0,m.jsxs)(D.Z,{children:[(0,m.jsx)(G.Z,{onClick:c,children:"Cancel"}),(0,m.jsx)(G.Z,{type:"submit",disabled:v||g,children:"Save"})]})]})})},ie=function(e){var n=e.tableInstance,r=n.rows,t=n.visibleColumns,a=n.prepareRow,i=e.onClick,l=function(e){i(e)};return r.length?(0,m.jsx)(m.Fragment,{children:r.map((function(e){return a(e),(0,m.jsx)(g.Z,(0,Z.Z)((0,Z.Z)({},e.getRowProps()),{},{hover:!0,onClick:function(){return l(e.original)},sx:{cursor:"pointer"},children:e.cells.map((function(e){return(0,m.jsx)(b.Z,(0,Z.Z)((0,Z.Z)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}):(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:t.length,children:(0,m.jsx)(A,{})})})},le=[{Header:"Name",accessor:"first_name",Cell:function(e){var n=e.row.original,r=n.avatar,t=n.first_name,a=n.last_name,i="".concat(t," ").concat(a);return(0,m.jsxs)(j.Z,{display:"flex",alignItems:"center",children:[(0,m.jsx)("img",{src:r,alt:"".concat(i," avatar"),width:50}),(0,m.jsx)(j.Z,{component:"span",marginLeft:1,children:i})]})}},{Header:"Department",accessor:"department",Cell:function(e){var n=e.value;return(0,m.jsx)(m.Fragment,{children:null!==n&&void 0!==n?n:(0,m.jsx)(H,{})})}},{Header:"Email",accessor:"email"},{Header:"Contribution",accessor:"contribution",Cell:function(e){var n=e.value;return n?(0,m.jsx)(P.Z,{value:n,thousandSeparator:!0,prefix:"$"}):(0,m.jsx)(H,{})}}],se=function(e){var n,r=e.query,a=(0,S.useQuery)(k()).data,i=function(e,n){if(!n)return e;var r=new RegExp(n,"i");return e.filter((function(e){var n=e.first_name,t=e.last_name;return r.test("".concat(n," ").concat(t))}))}(null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:[],r),l=(0,y.useTable)({data:i,columns:le}),s=l.getTableBodyProps,o=l.getTableProps,d=l.headerGroups,u=c.useState(),h=(0,t.Z)(u,2),x=h[0],j=h[1],P=(0,T.Rh)(!1),w=P.dialog,_=w.onClose,I=w.open,W=P.button.onClick;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.Z,{children:(0,m.jsxs)(p.Z,(0,Z.Z)((0,Z.Z)({},o()),{},{children:[d.map((function(e,n){return(0,m.jsx)("colgroup",{children:e.headers.map((function(e){return(0,m.jsx)("col",{width:e.width},e.id)}))},n)})),(0,m.jsx)(v.Z,{children:d.map((function(e){return(0,m.jsx)(g.Z,(0,Z.Z)((0,Z.Z)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return(0,m.jsx)(b.Z,(0,Z.Z)((0,Z.Z)({variant:"head"},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),(0,m.jsx)(C.Z,(0,Z.Z)((0,Z.Z)({},s()),{},{children:(0,m.jsx)(ie,{tableInstance:l,onClick:function(e){j(e),W()}})}))]}))}),I&&x?(0,m.jsx)(ae,{open:I,onClose:_,user:x}):null]})},oe=function(){var e=c.useState(),n=(0,t.Z)(e,2),r=n[0],u=n[1];return(0,m.jsxs)(h,{children:[(0,m.jsx)(d.q,{children:(0,m.jsx)("title",{children:"Contacts"})}),(0,m.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",zIndex:1,flexGrow:1,padding:2},children:[(0,m.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"Contacts"}),(0,m.jsx)(s.Z,{label:"Search Contacts",variant:"outlined",size:"small",margin:"normal",fullWidth:!0,onChange:function(e){c.startTransition((function(){u(e.target.value.trim())}))},InputProps:{endAdornment:(0,m.jsx)(o.Z,{position:"end",children:(0,m.jsx)(a.Z,{})})}}),(0,m.jsx)(se,{query:r})]})]})}}}]);
//# sourceMappingURL=contacts.782c4e65.chunk.js.map